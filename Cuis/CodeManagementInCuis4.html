<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head><!-- Provided by MyFreeTemplates.com -->


<title>Juan's place</title><meta content="text/html; charset=ISO-8859-1" http-equiv="Content-Type">
<meta content="Keywords here" name="keywords">
<meta content="Stuff from Juan Vuletich" name="description">
<meta content="MyFreeTemplates.com" name="Author">
<meta content="index, follow" name="robots"><!-- (Robot commands: All, None, Index, No Index, Follow, No Follow) -->

<meta content="30 days" name="revisit-after">
<meta content="global" name="distribution">
<meta content="general" name="rating">
<meta content="english" name="Content-Language">
<link type="text/css" rel="stylesheet" href="images/myfreetemplates.css"></head>
<body leftmargin="0" topmargin="0" onload="MM_preloadImages('images/btn_home_dn.jpg','images/btn_about_dn.jpg','images/btn_contact_dn.jpg','images/btn_products_dn.jpg','images/btn_support_dn.jpg','images/btn_news_dn.jpg')" marginheight="0" marginwidth="0">
<table border="0" cellpadding="0" cellspacing="0" height="100%" width="100%">
<tbody>
<tr>
<td height="87">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td rowspan="2" width="342"><img src="images/toplogo.jpg" height="87" width="342"></td>
<td rowspan="2" width="34"><img src="images/topmidspace.jpg" height="87" width="34"></td>
<td background="images/topbg.jpg"><img src="images/topbg.jpg" height="54" width="1"></td>
</tr>
<tr>
<td background="images/topnavbg.jpg"><a href="../index.html"><img style="border: 0px solid ; width: 55px; height: 33px;" alt="" src="images/btn_home.png" name="btn_home" id="btn_home" onmouseover="MM_swapImage('btn_home','','images/btn_home_dn.jpg',1)" onmouseout="MM_swapImgRestore()"></a><img src="images/navspacer.jpg" height="33" width="1"><a href="../aboutMe.html"><img style="border: 0px solid ; width: 58px; height: 33px;" alt="" src="images/btn_about.png" name="btn_about" id="btn_about" onmouseover="MM_swapImage('btn_about','','images/btn_about_dn.jpg',1)" onmouseout="MM_swapImgRestore()"></a><img src="images/navspacer.jpg" height="33" width="1"><a href="../features.html"><img style="border: 0px solid ; width: 67px; height: 33px;" alt="" src="images/btn_features.png" name="btn_contact" id="btn_contact" onmouseover="MM_swapImage('btn_contact','','images/btn_contact_dn.jpg',1)" onmouseout="MM_swapImgRestore()"></a><img src="images/navspacer.jpg" height="33" width="1"><a href="../projects.html"><img style="border: 0px solid ; width: 79px; height: 33px;" alt="" src="images/btn_projects.png" name="btn_products" id="btn_products" onmouseover="MM_swapImage('btn_products','','images/btn_products_dn.jpg',1)" onmouseout="MM_swapImgRestore()"></a><img src="images/navspacer.jpg" height="33" width="1"><a href="../research.html"><img style="border: 0px solid ; width: 72px; height: 33px;" alt="" src="images/btn_research.png" name="btn_support" id="btn_support" onmouseover="MM_swapImage('btn_support','','images/btn_support_dn.jpg',1)" onmouseout="MM_swapImgRestore()"></a><img src="images/navspacer.jpg" height="33" width="1"><img style="width: 50px; height: 33px;" alt="" src="images/btn_news.png" name="btn_news" id="btn_news" onmouseover="MM_swapImage('btn_news','','images/btn_news_dn.jpg',1)" onmouseout="MM_swapImgRestore()"></td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td valign="top">
<table background="images/topnavbg.jpg" border="0" cellpadding="0" cellspacing="0" height="100%" width="100%">
<tbody>
<tr>
<td colspan="2" background="images/basebg2.jpg" height="9"><img src="images/basebg2.jpg" height="9" width="1"></td>
</tr>
<tr>
<td rowspan="2" valign="top" width="150">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td valign="top"><img style="width: 240px; height: 240px;" alt="" src="../images/Juan.PNG"></td>
</tr>
<tr>
<td bgcolor="#ffffff" height="1"><img src="images/spacer.gif" height="1" width="1"></td>
</tr>
<tr>
<td><br>
<br>
<img src="images/spacer.gif" height="1" width="1"> &nbsp;<br>
<a href="http://www.jvuletich.org/Cuis/CategoriesAndChangeSets.txt"><span style="color: rgb(102, 51, 255);"></span></a><br>
<br>
</td>
</tr>
</tbody>
</table>
</td>
<td bgcolor="#ffffff" valign="top">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td colspan="3" background="images/navbasebg.jpg" height="29"><img src="images/navbasebg.jpg" height="29" width="1"></td>
</tr>
<tr>
<td width="40">&nbsp;</td>
<td>
&nbsp;<br>
&nbsp;<br>
<h2 style="text-align: right;">April 2012</h2>
<h1><br>
</h1>
<h1 style="text-align: center;"><big><big>Code Management in Cuis 4.0</big></big></h1>
<p><span style="color: rgb(102, 51, 255);"><span style="color: black;"></span></span><span style="color: rgb(102, 51, 255);"><span style="color: black;"></span></span></p><p>Cuis
4 includes new tools and new suggested procedures for managing
Smalltalk code. Code that is not part of the Cuis Core image itself,
like applications, frameworks and libraries, should be stored in
Packages. New code that is meant as patches, fixes or additions; that
could eventually become part of Cuis itself, is not part of any
Package, and is therefore automatically stored in Change Sets.</p><p></p><h1>Packages</h1><p>Let's
start with Packages. The Package implementation in Cuis 4 is based on
PackageInfo, the standard way to specify packages in Squeak and its
derivatives, and used, for example, by Monticello. It uses Package
names, to specify prefixes for Class and Method categories. Classes and
Methods whose categories match a Package's prefixes belong in that
Package. More details about how PackageInfo decides what code belongs
in a package are available at <a style="color: rgb(102, 51, 255);" href="http://wiki.squeak.org/squeak/3329">http://wiki.squeak.org/squeak/3329</a> .<br><br>To
install packages (.pck files) in Cuis, use the FileList, navigate to
the appropriate directory (on disk, or in a GitHub repository, etc),
select the package file and click on [Install Package].<br><br>Cuis
includes a tool to manage installed Packages. It is at World / Open /
Installed Packages. To create a new package (instead of installing an
existing one from a file), click on [Create Package] This creates a new
package, and associates with it all the existing code in the image that
matches the package name.<br><br>The operations available on installed or newly created packages are:<br><br><span style="font-weight: bold;">[Save]</span>
Saves a package on the file system. Overwrites any existing version. It
is good to save package from time to time, to reduce the risk of losing
code.<br><br><span style="font-weight: bold;">[Delete]</span> Removes
the Package instance from the image. Does not remove any code. This
means, effectively, to merge back the code into Cuis.<br><br><span style="font-weight: bold;">[Browse unsaved Changes]</span>
This opens a ChangeSorter on the ChangeSet that captures all the
changes done to the Package since it was last saved. Therefore it shows
the work done on the package that would be lost if the package is not
saved.<br><br><span style="font-weight: bold;">[Browse Package Code]</span>
This opens a Class Browser that only shows the code that belongs in the
package. This is useful for working on a package, or studying it.<br><br>The
tool shows, for each Package, the name, whether it is dirty (has
unsaved changes) and the file it was installed from / saved to.<br><br>Handling
Packages like this, Cuis behaves as a sort of document editor (like,
for example a regular text editor) whose documents are Package files
(.pck). Cuis doesn't handle Package versions, ancestries, etc. If
versioning of Packages is desired, the best is to use a versioning file
repository, such as Git or Mercurial. The recommendation is to use a
GitHub repository with a name beginning with 'Cuis-', so it will be
easy for anybody to find it. Cuis Package files (.pck) are
uncompressed, use Lf (ASCII 10) as newLine, and are encoded in ISO
8859-15. This means that are Git friendly, and Git/GitHub can diff and
merge them, and browse them with syntax highlighting.<br><br>This is
not unlike using Git or GitHub with a more conventional development
environment such as Eclipse or a text editor. Like Cuis 4, these tools
don't do version handling themselves, they just load and save files;
and let Git do its magic.</p><br><h1>Changes to the Cuis base image</h1><p>The
way ChangeSets are created and managed in Cuis 4 is very different from
previous versions of Cuis (and Squeak &amp; derivatives). This was done
to make ChangeSets a good way to manage changes to the base Cuis Core
image, while keeping code in Pakges out of the way, so they don't get
mixed together.<br><br>What is not in a Package belongs (at least
temporarily) in the Cuis Core image. Such code is automatically
captured in a ChangeSet. The ChangeSet for Core changes is created
automatically and named like
"1243-CuisCore-JuanVuletich-2012Apr03-22h50m". The number at the
beginning is the next number for the Cuis update stream, and is
provided only as a suggestion. The "CuisCore" part is to reveal that
the code belongs in the base image and not in some package. Then we
have author name and date / time of creation. These ChangeSets are
created automatically. There is no longer a way to manually create
them, or make them "current" or "active". It is best not to rename
them. These ChangeSets will not capture any code that belongs in a
Package.<br><br>Opening a Change Sorter will show the CuisCore change
set. This is useful, for example, to check that no code that was
intended for a Package ends here by mistake (because of the wrong class
or method category). But it is also useful when doing changes to the
base system. Now, we can do changes both to the base system and to a
number of packages, all in the same session, without having to be
careful about selecting the proper change set before saving a method:
The code is automatically added to the proper Package or ChangeSet,
simply following the class or method category. Gone are the days of
messed up change sets and lost code!<br><br>When the changes to the
base system are complete, it is a good time to review the CuisCore
change set and, maybe remove from it changes that we don't want to keep
(for example, experiments, halts, etc). Then, just do right click /
File out and remove. This saves the ChangeSet on disk. It also removes
it from the ChangeSorter (but it doesn't remove any code). This is
good, because the next changes done will end in a new CuisCore change
set, and there's no risk of having undesired changes in the old one. As
changes to the base image progress, and several CuisCore change sets
are saved to disk, these numbered files are created in sequence. They
will be ready to be loaded back in proper order in a fresh Cuis image,
or to be sent to Cuis maintainers for integration in the update stream
and in next releases of Cuis.</p><br><h1>Loading ChangeSet files into Cuis<small></small></h1><p>There are two ways to load ChangeSet files (.cs): <span style="font-weight: bold;">[FileIn]</span> and <span style="font-weight: bold;">[Install]</span>.<br><br><span style="font-weight: bold;">[FileIn]</span>
loads the code without creating a new ChangeSet object. This means that
changes that belong in the base image (and not in a package) will be
added to the current ChangeSet for Cuis core changes, as if they were
done by the user. This is appropriate when we are combining code from
more than one source into a single ChangeSet. Any change that belongs
in an installed package will be added to it, and the package will
appear as dirty.<br><br><span style="font-weight: bold;">[Install]</span>
loads the code into a separate ChangeSet object (viewable in the
ChangeSorter tool). This is appropriate for loading Cuis updates, or
other code that we are not authoring, as it doesn't add new items
(class or method definitions) to the current ChangeSet for our changes
to Cuis. Usually any ChangeSets should be installed before doing
changes to the image. The reason is that an installed ChangeSet could
overwrite changes done by you, or packages you have installed. If this
is the case, the affected packages would appear as dirty, and your
change set would include any installed changes (that don't belong in a
package). Be careful when saving packages or change sets if this was
the case!</p><br>

</td>
<td width="25">&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td bgcolor="#ffffff">&nbsp;</td>
</tr>
</tbody>
</table>
</td>
</tr>
<tr>
<td background="images/basebg1.jpg" height="24"><img src="images/basebg1.jpg" height="24" width="1"></td>
</tr>
<tr>
<td background="images/basebg2.jpg" height="44" valign="top">
<table border="0" cellpadding="0" cellspacing="0" width="100%">
<tbody>
<tr>
<td class="baseline" height="26">&nbsp;&nbsp;©&nbsp;2012 Juan M. Vuletich</td>
<td class="baseline" align="right"><span style="text-decoration: underline;"></span></td>
</tr>
</tbody>
</table>
</td>
</tr>
</tbody>
</table>
</body></html>